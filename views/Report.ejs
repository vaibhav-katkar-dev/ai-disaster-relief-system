<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Auto Location Sender</title>

  <style>
    .dashboard-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
}

.card {
  background: #ffffff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
  text-align: center;
}

    body {
      margin: 0;
      padding: 0;
      background-color: #eef3fb;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #2b2b2b;
    }

    h1 {
      text-align: center;
      margin: 30px 0;
      color: #1e3a8a;
      font-size: 2rem;
    }

    #status {
      max-width: 1000px;
      margin: 0 auto 40px auto;
      background: #ffffff;
      padding: 20px 30px;
      border-radius: 12px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
    }

    #status p {
      margin: 5px 0;
      font-size: 1rem;
      color: #444;
    }

    .download-btn-container {
      text-align: center;
      margin: 20px 0;
    }

    .download-btn {
      padding: 10px 20px;
      font-size: 1rem;
      background-color: #1d4ed8;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .download-btn:hover {
      background-color: #163ea0;
    }

    .gemini-output {
      background: #f5f8ff;
      border-radius: 16px;
      padding: 30px;
      margin-top: 30px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      color: #2b2b2b;
      line-height: 1.6;
    }

    .gemini-output h2 {
      font-size: 2rem;
      margin-bottom: 20px;
      color: #1d4ed8;
      text-align: center;
    }

    .gemini-output p strong {
      color: #1d4ed8;
      font-size: 1.1rem;
    }

    .gemini-output ul {
      margin-left: 20px;
      padding-left: 20px;
      list-style-type: disc;
    }

    .gemini-output li {
      margin-bottom: 12px;
      font-size: 1rem;
    }

    .gemini-output li strong {
      color: #1e293b;
    }

    .gemini-output p {
      margin: 15px 0;
    }

    .gemini-output p:last-of-type {
      font-style: italic;
      color: #555;
      font-size: 0.95rem;
      border-top: 1px dashed #ccc;
      padding-top: 10px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      #status {
        padding: 15px;
      }

      .gemini-output {
        padding: 20px;
      }

      .gemini-output h2 {
        font-size: 1.6rem;
      }

      h1 {
        font-size: 1.5rem;
      }
    }
    .header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: #ffffff;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  position: sticky;
  top: 0;
  z-index: 1000;
}

.logo {
  font-size: 1.8rem;
  font-weight: bold;
  color: #ff4b2b;
  font-family: 'Segoe UI', sans-serif;
  letter-spacing: 1px;
}

.nav {
  display: flex;
  gap: 1.5rem;
}

.nav a {
  text-decoration: none;
  color: #333;
  font-weight: 500;
  font-size: 1rem;
  position: relative;
  transition: color 0.3s ease;
}

.nav a::after {
  content: '';
  position: absolute;
  width: 0%;
  height: 2px;
  bottom: -3px;
  left: 0;
  background-color: #ff4b2b;
  transition: width 0.3s ease;
}

.nav a:hover {
  color: #ff4b2b;
}

.nav a:hover::after {
  width: 100%;
}

@media (max-width: 768px) {
  .header {
    flex-direction: column;
    align-items: flex-start;
  }

  .nav {
    flex-direction: column;
    gap: 0.8rem;
    margin-top: 0.5rem;
  }
}

  </style>
</head>
<body>

  <div class="header">
    <div class="logo">Emergency Aid Now</div>
    <div class="nav">
        <a href="/">Home</a>
        <a href="/reqhelp">Request Help</a>
        <a href="/offhelp">Offer Help</a>
        <a href="/dashboard">Dashboard</a>
        <a href="/api/risk/predict-risk">Risk Zones</a>
        <a href="/location">Get Report</a>


        <!-- <button class="login-btn">Login</button> -->
    </div>
</div>
  
  <h1>üåç Disaster Relief Report</h1>

  <div id="reportContainer">
    <div id="status">
      <div>
        <!-- üìç Location Info -->
        <h2 style="color:#1e3a8a;">üìç Location Details</h2>
        <p><strong>City:</strong> <%= data.city %></p>
        <p><strong>Region:</strong> <%= data.region %></p>
        <p><strong>Country:</strong> <%= data.country %></p>
        <p><strong>Latitude:</strong> <%= data.lat %></p>
        <p><strong>Longitude:</strong> <%= data.lon %></p>
  
        <!-- üìù Important Notice -->
        <div style="margin: 20px 0; padding: 15px; background-color: #fff3cd; border-left: 5px solid #ffc107; border-radius: 8px;">
          ‚ö†Ô∏è <strong>Important:</strong> This report is auto-generated using real-time data from weather forecasts, news, and social media to assist in flood disaster planning and emergency response.
        </div>
  
        <!-- üìÑ PDF Button -->
        <div class="download-btn-container">
          <button class="download-btn" onclick="downloadPDF()">üìÑ Download Report as PDF</button>
        </div>
  
        <!-- ü§ñ Gemini Report -->
        <div class="gemini-output">
          <%- jdata %>
        </div>
      </div>
    </div>
  </div>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    function downloadPDF() {
      const element = document.querySelector('.gemini-output');

      const opt = {
        margin:       0.5,
        filename:     'Disaster_Relief_Report.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save();
    }
  </script>


</body>
</html>
